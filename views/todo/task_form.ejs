<!DOCTYPE html>
<html lang="en">
    <head>
        <title><%= title %></title>
        <%- include ('partials/header'); -%>
        <%- include ('partials/helpfunctions.ejs'); -%>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-2">
                    <!-- block menu -->
                    <%- include ('partials/menu.ejs'); -%>
                </div>
                <div class="col-sm-10">
                    <!-- block content -->
                    <h1><%= title %></h1>

                    <form name="taskForm" method="POST" action="" role="form" data-toggle="validator" novalidate="true">
                        <div class="form-group">
                            <label for="description">Description:</label>
                            <input type="text" class="form-control" name="description" id="description" required="required" data-error="Please enter a description"
                                value="<%= typeof(task) !== 'undefined' ? task.description : '' %>">
                            <div class="help-block with-errors"></div>
                        </div>
                        <div class="form-group">
                            <label for="actionholder">Action by:</label>
                            <input type="text" class="form-control"name="actionholder" id="actionholder" required="required" data-error="Plese enter an action holder" 
                                value="<%= typeof(task) !== 'undefined' ? task.actionHolder : '' %>">
                            <div class="help-block with-errors"></div>
                        </div>
                        <div class="form-group">
                            <label for="category">Category:</label>
                            <select class="form-control" name="category" id="category" required="required" data-error="Please select one option">
                                <option></option>
                                    <% categories.forEach(function (category) { %>
                                        <option value="<%= category.id %>"> <%= category.description %>
                                        <% }) %>
                                </option>
                            </select>
                            <div class="help-block with-errors"></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="startdate">Start date:</label>
                                <input type="date" class="form-control" name="startdate" id="startdate" 
                                    value="<%= typeof(task) !== 'undefined' ? formatDate(task.startDate) : '' %>">
                                <div class="help-block with-errors"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="enddate">End date:</label>
                                <input type="date" class="form-control" name="enddate" id="enddate"
                                    value="<%= typeof(task) !== 'undefined' ? formatDate(task.endDate) : '' %>">
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="status">Status:</label>
                            <select class="form-control" name="status" id="status" required="required" data-error="Please select one option">
                                <option></option>
                                    <% statusses.forEach(function (status) { %>
                                        <option value="<%= status.id %>"> <%= status.description %>
                                        <% }) %>
                                </option>
                            </select>
                            <div class="help-block with-errors"></div>
                        </div>
                        <div class="form-group">
                            <label for="comments">Comments:</label>
                            <textarea class="form-control" name="comments" id="comments" rows="5"
                                value="<%= typeof(task) !== 'undefined' ? task.comments : '' %>">
                            </textarea>
                            <div class="help-block with-errors"></div>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit</button>

                    </form>
                    <%- include ('partials/display_errors'); -%>
                </div>
            </div>
        </div>
    </body>    
</html>